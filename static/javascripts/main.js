"use strict";const body=document.body,hero=document.getElementById("hero");function checkScroll(e){e>=5?body.classList.add("scrolled"):body.classList.remove("scrolled")}window.onload=checkScroll(),document.body.onload=setTimeout(function(){document.body.className=""},800);const callback=(e,n)=>{e.forEach(e=>{e.isIntersecting?body.classList.remove("scrolled"):body.classList.add("scrolled")})},options={root:null,rootMargin:"0px",threshold:.99},scrolledObserver=new IntersectionObserver(callback,options);function addClass(e){document.documentElement.classList.add(e)}scrolledObserver.observe(hero);var camera,scene,renderer,image,mesh,avif=new Image;function check_webp_feature(e){var n=new Image;n.onload=function(){var a=0<n.width&&0<n.height;e(a)},n.onerror=function(){e(!1)},n.src="data:image/webp;base64,UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA=="}avif.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=",avif.onload=function(){addClass("avif")},avif.onerror=function(){check_webp_feature(function(e){return addClass(e?"webp":"fallback")})};const satellites=[],ringsList=[];function createGyros(e){const n=new THREE.MeshPhongMaterial({side:THREE.DoubleSide,color:e,transparent:!1,reflectivity:20,shininess:50}),a=new THREE.RingBufferGeometry(140,143,80);var o=a.attributes.position,i=new THREE.Vector3;for(let e=0;e<o.count;e++)i.fromBufferAttribute(o,e),a.attributes.uv.setXY(e,i.length()<4?0:1,1);const r=new THREE.Mesh(a,n);return r.rotation.x=Math.PI/2*.94,r.castShadow=!0,r.receiveShadow=!1,r}function init(e,n,a,o,i,r,t,s,d,l){var A=new Date(s);const c=t.split(", "),h=l.split(", ");(renderer=new THREE.WebGLRenderer({alpha:!0,antialias:!0})).setSize(window.innerWidth,window.innerHeight),renderer.setPixelRatio(window.devicePixelRatio),renderer.shadowMap.enabled=!0,renderer.shadowMap.type=THREE.PCFSoftShadowMap,hero.appendChild(renderer.domElement),scene=new THREE.Scene,(camera=new THREE.PerspectiveCamera(70,window.innerWidth/window.innerHeight,1,1500)).position.set(0,0,220);var m=290+40.8/i*8,E=new THREE.DirectionalLight(4210752,2);E.castShadow=!0,E.position.set(0,20,m),E.shadow.radius=10,E.shadow.mapSize.width=2048,E.shadow.mapSize.height=2048,E.shadow.bias=.01;const g=180;E.shadow.camera.left=-90,E.shadow.camera.right=90,E.shadow.camera.top=90,E.shadow.camera.bottom=-90,E.shadow.camera.far=7*g,scene.add(E);var p=new THREE.AmbientLight(16777215,.98);scene.add(p);const f=new THREE.TextureLoader,w=(new THREE.CubeTextureLoader).load(["./space-posx.jpg","./space-negx.jpg","./space-posy.jpg","./space-negy.jpg","./space-posz.jpg","./space-negz.jpg"]);if(w.encoding=THREE.sRGBEncoding,scene.background=w,"No"!=c[0]){var v=new THREE.SphereBufferGeometry(1,200,200),u=0;for(let e of c){if("small moon"==e)var R=5.2/i;else if("medium moon"==e)R=.14*80/i;else if("large moon"==e)R=.28*80/i;else if("ice moon"==e||"fungal moon"==e)R=8/i;else if("living moon"==e)R=4/i;var y=i+160+u*R*6;const n=new THREE.Object3D;n.position.x=y,n.position.y=5,satellites.push(n);let a="living moon"==e?"lightgreen":"0x000000",o="ice moon"==e?0:.8;const r=new THREE.MeshPhongMaterial({color:a,map:f.load("moon"+u+".png"),bumpMap:f.load("moon"+u+".png"),bumpScale:o,displacementMap:f.load("moon"+u+".png"),displacementScale:0,reflectivity:1,shininess:0}),t=new THREE.Mesh(v,r);t.castShadow=!0,t.receiveShadow=!0,t.scale.set(R,R,R),n.add(t),scene.add(n),u++}}(B=f.load(e)).anisotropy=renderer.capabilities.getMaxAnisotropy(),B.minFilter=THREE.LinearMipmapLinearFilter;var b=f.load(n);b.minFilter=THREE.LinearFilter;THREE.ImageUtils.crossOrigin="anonymous";var B=f.load(e);if("Crystal"==o)var H=new THREE.MeshPhongMaterial({bumpMap:f.load(b),displacementMap:b,reflectivity:.75,color:"purple",shininess:10,refractionRatio:.85,envMap:w}),T=new THREE.SphereBufferGeometry(80,8,6);else{H=new THREE.MeshPhongMaterial({color:"#663926",map:B,emissive:0,bumpMap:f.load(n),displacementMap:f.load(n),bumpScale:16,displacementScale:8,reflectivity:0,shininess:0}),T=new THREE.SphereBufferGeometry(80,360,360);let e=.7*(A.getMonth()+1)/12;H.color.setRGB(.8,e,.4)}T=new THREE.SphereBufferGeometry(80,360,360);if((mesh=new THREE.Mesh(T,H)).castShadow=!0,mesh.receiveShadow=!0,scene.add(mesh),"Gyros"==d){var M=["grey","darkgrey","lightblue","darkgreen","darkred","darkred","darkblue","black","Indigo","Maroon","DarkSlateGray"],S=M[Math.floor(Math.random()*M.length)],x=createGyros(S),G=createGyros(S);x.rotation.x=.9*Math.PI,scene.add(x),scene.add(G),ringsList.push(x),ringsList.push(G)}if("Helium-Hydrogen"==r)var C="( 0.5, 0, 1, 1.1 )",L=105;else if("Radioactive"==r)C="( 0.94, 0.25, 0.2, 1.1 )",L=105;else if("Arcane"==r)C="( 0.98, 0.21, 0.25, 1.1 )",L=92;else if("Poisonous"==r)C="( 0.44, 0.85, 0.2, 1.1 )",L=103;else if("Eldritch"==r)C="( 0.84, 0.25, 0.82, 1.1 )",L=105;else if("Poisonous"==r)C="( 0.44, 0.85, 0.2, 1.1 )",L=103;else if("Thaumaturgic"==r)C="( 0.1, 0.1, 0.9, 1.1 )",L=103;else if("Balanced"==r)C="( 0.0, 0.0, 0.9, 1.1 )",L=103;else if("Biodome"==r)C="( 0.5, 0.9, 0.8 , 0.8 )",L=103;else C="(0.5,0.6,1,1)",L=105;var k=`varying vec3 vNormal;\n                        void main() \n                        {\n                        float intensity = pow( 0.7 - dot( vNormal, vec3( 0.0, 0.0, 1.0 ) ), 4.0 ); \n                        gl_FragColor = vec4${C} * intensity;\n                        }`,I=new THREE.ShaderMaterial({uniforms:{},vertexShader:document.getElementById("vertexShader").textContent,fragmentShader:k,side:THREE.BackSide,blending:THREE.AdditiveBlending,transparent:!0}),N=new THREE.SphereBufferGeometry(L,360,360),W=new THREE.Mesh(N,I);if(scene.add(W),"Eldritch"==r){C="(0.8,0.1,0.1,1)",L=95;var P=THREE.NormalBlending}else if("Thaumaturgic"==r){C="(0.1,0.9,0,1)",L=95;P=THREE.AdditiveBlending}else if("Balanced"==r){C="(0.8,0.1,0,1)",L=95;P=THREE.NormalBlending}else if("Red laser shield"==r){C="(0.9,0.1,0,1)",L=95;P=THREE.NormalBlending}else if("Green laser shield"==r){C="(0.1,0.9,0,1)",L=95;P=THREE.NormalBlending}else if("Purple laser shield"==r){C="(0.65,0.1,0.85,1)",L=95;P=THREE.NormalBlending}else if("Biodome"==r){C="(0.85,1,0.45,0.7)",L=95;P=THREE.NormalBlending}else{C="(0,0,0,0)";P=THREE.AdditiveBlending}if("Red laser shield"==r||"Purple laser shield"==r||"Green laser shield"==r)var F=`varying vec3 vNormal;\n                        void main() \n                        {\n                        float intensity = pow( 0.7 + dot( vNormal, vec3( 0.0, 0.0, 1.0 ) ), 2.0 ); \n                        gl_FragColor = vec4${C} * intensity;\n                        }`;else if("Biodome"==r)P=THREE.AdditiveBlending,F=`varying vec3 vNormal;\n                        void main() \n                        {\n                        float intensity = pow( 0.3 + dot( vNormal, vec3( 0.0, 0.0, 1.0 ) ), 0.5 ); \n                        gl_FragColor = vec4${C} * intensity;\n                        }`;else F=`varying vec3 vNormal;\n                        void main() \n                        {\n                        float intensity = pow( 0.7-dot( vNormal, vec3( 0.0, 0.0, 1.0 ) ),4.0 ); \n                        gl_FragColor = vec4${C} * intensity;\n                        }`;I=new THREE.ShaderMaterial({uniforms:{},vertexShader:document.getElementById("vertexShader").textContent,fragmentShader:F,side:THREE.BackSide,blending:P,transparent:!0}),N=new THREE.SphereBufferGeometry(L,360,360),W=new THREE.Mesh(N,I);scene.add(W),runAnimation(A,d,h);new IntersectionObserver((e,n)=>{e.forEach(e=>{e.isIntersecting?(e.target.classList.remove("noAni"),runAnimation(A,d,h)):e.target.classList.add("noAni")})},{root:null,rootMargin:"0px",threshold:.2}).observe(hero)}function runAnimation(e,n,a){!function n(){const o=(Date.now()-e.getTime())/16e3;satellites.forEach(e=>{if(o){var n=Math.sqrt(e.position.x*e.position.x+e.position.z*e.position.z);e.position.x=n*Math.sin(.5*o/Math.sqrt(n)),e.position.z=n*Math.cos(.5*o/Math.sqrt(n))}});let i=1;ringsList.forEach(e=>{let n=(i+1)/2;e.rotation.y=o+n,e.rotation.z=o+n,i=-i});hero.classList.contains("noAni")||document.hidden||requestAnimationFrame(n);mesh.rotation.x=1e-6;mesh.rotation.y=o;if(a.includes("Versicoloria colony")){var r=50*(e.getMonth()+1),t=.3+.9*Math.abs(Math.sin(o%r/r-.5));mesh.material.color.setRGB(.9*t,.5*(1-t),.5*(1-t))}renderer.render(scene,camera);render()}()}function render(e){renderer.render(scene,camera)}function onWindowResize(){camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight)}window.innerWidth>=1020&&init("/img/CardaWorld1627.png","/img/CardaWorld1627.png","CardaWorld1627","Rocky",.76,"Arcane","no","1957-03-29","no","Versicoloria colony"),window.addEventListener("resize",onWindowResize,!1);